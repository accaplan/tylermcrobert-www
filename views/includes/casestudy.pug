extends ../layout.pug

block content
  -var cs_content = document.data.cs_content;

  main.caseStudy
    div.csBlock.caseStudy__info
      div.caseStudy__info__title
        h1
          != PrismicDOM.RichText.asText(document.data.title, ctx.linkResolver)
      div.caseStudy__info__desc
        p!= PrismicDOM.RichText.asText(document.data.description, ctx.linkResolver)
      .csBlock__tagIndicator.-left
        each tag in document.data.caseStudyContext.uniqueTags
          if  document.tags.indexOf(tag) > -1
            p.csBlock__tagIndicator__tag.active= tag
          else  
            p.csBlock__tagIndicator__tag= tag
      .csBlock__tagIndicator.-right
        p.csBlock__tagIndicator__tag No. 1 of 8
    
    .caseStudy__content
      each item in cs_content
        
        if item.slice_type === 'single_image'
          div(class="row caseStudy__block caseStudy__block--single")
            img(class="caseStudy__img" src!=item.primary.image.url)
        
        if item.slice_type === 'double_image_block'
          div(class="row caseStudy__block caseStudy__block--double")
            div(class="col caseStudy__col --left")
              img(class="caseStudy__img" src!=item.primary.left_image.url)
            div(class="col caseStudy__col--right")  
              img(class="caseStudy__img" src!=item.primary.right_image.url)
        
        if item.slice_type === 'triple_image_block'
          -var direction = item.primary.main_image_position
          div(class="row caseStudy__block caseStudy__block--triple")
            if direction == "Left"
                div(class="col caseStudy__col --left")
                  img(class="caseStudy__img" src!=item.primary.main_image.url)
                div(class="col caseStudy__col --right")
                  img(class="caseStudy__img" src!=item.primary.secondary_image_1.url)
                  img(class="caseStudy__img" src!=item.primary.secondary_image_2.url)
            if direction == "Right"
                div(class="col caseStudy__col --left")
                  img(class="caseStudy__img" src!=item.primary.secondary_image_1.url)
                  img(class="caseStudy__img" src!=item.primary.secondary_image_2.url)
                div(class="col caseStudy__col --right")
                  img(class="caseStudy__img" src!=item.primary.main_image.url)
      
        if item.slice_type === 'website'
          -var browserSettings = {frameColor,}
            div.row.caseStudy__block.caseStudy__block--website(
              style=`background-color: ${item.primary.background_color}`)
              div.col.caseStudy__website
                div.caseStudy__website__frame(
                    style=`background-color: ${item.primary.browser_frame_color}`)
                  span.dot.-dot1(style=`background-color: ${item.primary.background_color}`)
                  span.dot.-dot2(style=`background-color: ${item.primary.background_color}`)
                  span.dot.-dot2(style=`background-color: ${item.primary.background_color}`)
                div.caseStudy__website__window
                  -var vidURL = item.primary.browser_media.url
                  -var imgURL = item.primary.browser_image.url
                  if vidURL
                    video.caseStudy__video(autoplay)
                      source(src=vidURL type="video/mp4")
                  else
                    img(class="caseStudy__img caseStudy_website_image" src!=imgURL)
